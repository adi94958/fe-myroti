{"version":3,"file":"static/js/274.706eee0f.chunk.js","mappings":"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","sources":["views/koordinator/lapak/FormUpdateLapak.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport Swal from 'sweetalert2'\nimport { useNavigate } from 'react-router-dom'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardFooter,\n  CCardHeader,\n  CCol,\n  CForm,\n  CFormInput,\n  CInputGroup,\n  CInputGroupText,\n  CRow,\n  CSpinner,\n  CFormSelect,\n} from '@coreui/react'\n\nconst FormUpdateRoti = () => {\n  const [selectedArea, setSelectedArea] = useState('') // Nilai opsi yang dipilih\n  const [optionsArea, setOptionsArea] = useState([]) // Array untuk menyimpan opsi dari API\n  const [selectedKurir, setSelectedKurir] = useState('') // Nilai opsi yang dipilih\n  const [optionsKurir, setOptionsKurir] = useState([]) // Array untuk menyimpan opsi dari API\n  const [namaLapak, setNamaLapak] = useState('')\n  const [kodeLapak, setKodeLapak] = useState('')\n  const [alamat, setAlamat] = useState('')\n  const [noTelp, setNoTelp] = useState('')\n  const [message, setMessage] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [isKurirDisabled, setIsKurirDisabled] = useState(false)\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    const dataLapak = JSON.parse(localStorage.getItem('lsDataLapak'))\n    setNamaLapak(dataLapak.nama_lapak)\n    setAlamat(dataLapak.alamat)\n    setSelectedArea(dataLapak.area_id)\n    setSelectedKurir(dataLapak.id_kurir)\n    setKodeLapak(dataLapak.kode_lapak)\n    setNoTelp(dataLapak.no_telp)\n    handleArea()\n    handleKurir(dataLapak.area_id)\n  }, [])\n\n  function handleArea() {\n    axios\n      .get('https://be-myroti-production.up.railway.app/api/area')\n      .then((response) => {\n        const data = response.data // Mengakses data dari respons API\n        const formattedOptions = [\n          '--Pilih Kecamatan--',\n          ...data.map((area) => ({\n            label: area.area_distribusi, // Ganti dengan properti yang sesuai dari API area\n            value: area.area_id, // Ganti dengan properti yang sesuai dari API area\n            isSelected: area.area_id === selectedArea,\n          })),\n        ]\n        // Menyimpan data opsi ke dalam state\n        setOptionsArea(formattedOptions)\n      })\n      .catch((error) => {\n        console.error('Error:', error)\n      })\n  }\n\n  function handleKurir(area_id) {\n    axios\n      .get('https://be-myroti-production.up.railway.app/api/kurir')\n      .then((response) => {\n        const data = response.data // Pastikan respons dari API kurir mengandung data kurir yang benar\n        const areaLapakString = parseInt(area_id, 10)\n        const filteredKurir = data.filter((kurir) => kurir.area_id === areaLapakString)\n        console.log(filteredKurir)\n        const OptionsKurir = [\n          '--Pilih Kurir--',\n          ...filteredKurir.map((kurir) => ({\n            isSelected: kurir.id_kurir === selectedKurir,\n            label: kurir.nama, // Ganti dengan properti yang sesuai dari API area\n            value: kurir.id_kurir, // Ganti dengan properti yang sesuai dari API area\n          })),\n        ]\n        // Menyimpan data opsi ke dalam state\n        setOptionsKurir(OptionsKurir)\n      })\n      .catch((error) => {\n        console.error('Error:', error)\n      })\n  }\n\n  const handleSelectChangeArea = (event) => {\n    const selectedValue = event.target.value\n    setSelectedArea(selectedValue)\n    setIsKurirDisabled(selectedValue === '--Pilih Kecamatan--')\n    if (selectedValue === '--Pilih Kecamatan--') {\n      // Jika '--Pilih Kecamatan--' dipilih, set opsi kurir menjadi kosong\n      setOptionsKurir([])\n    } else {\n      // Jika nilai valid dipilih, ambil kurir berdasarkan nilai tersebut\n      handleKurir(selectedValue)\n      setSelectedKurir('')\n    }\n  }\n\n  const handleSelectChangeKurir = (event) => {\n    const selectedValueKurir = event.target.value\n    setSelectedKurir(selectedValueKurir)\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    const area_id = parseInt(selectedArea, 10)\n    const updateLapak = {\n      nama_lapak: namaLapak,\n      no_telp: noTelp,\n      id_kurir: selectedKurir,\n      area_id: area_id,\n      alamat_lapak: alamat,\n    }\n    console.log(updateLapak)\n    console.log(kodeLapak)\n\n    try {\n      const response = axios.put(\n        `https://be-myroti-production.up.railway.app/api/koordinator/lapak/update/${kodeLapak}`,\n        updateLapak,\n      )\n      console.log('Roti updated successfully:', response.data)\n      localStorage.removeItem('lsDataLapak')\n      Swal.fire({\n        title: 'Berhasil',\n        text: `Data ${updateLapak.nama_lapak} telah berhasil diubah.`,\n        icon: 'success',\n        confirmButtonText: 'OK',\n      }).then((result) => {\n        if (result.isConfirmed) {\n          window.location.href = '/lapak'\n          console.log('Roti updated successfully:', response.data)\n        }\n      })\n    } catch (error) {\n      if (error.response && error.response.data && error.response.data.message) {\n        const resMessage =\n          (error.response && error.response.data && error.response.data.message) ||\n          error.message ||\n          error.toString()\n        setMessage(resMessage)\n      }\n      setLoading(false)\n    }\n  }\n\n  function handleCancel() {\n    localStorage.removeItem('lsDataLapak')\n    navigate('/lapak')\n  }\n\n  return (\n    <>\n      <CCard>\n        <CForm onSubmit={handleSubmit}>\n          <CCardHeader>Form Update Lapak</CCardHeader>\n          <CCardBody>\n            <CRow>\n              <CCol xs={12}>\n                <CInputGroup className=\"mb-3\">\n                  <CFormInput\n                    name=\"namaLapak\"\n                    placeholder=\"Nama Lapak\"\n                    floatingLabel=\"Nama Lapak\"\n                    defaultValue={namaLapak}\n                    required\n                    onChange={(e) => setNamaLapak(e.target.value)}\n                  />\n                </CInputGroup>\n              </CCol>\n              <CCol xs={12}>\n                <CInputGroup className=\"mb-3\">\n                  <CFormInput\n                    name=\"NoTelp\"\n                    placeholder=\"No Telp\"\n                    floatingLabel=\"No Telp\"\n                    defaultValue={noTelp}\n                    required\n                    onChange={(e) => setNoTelp(e.target.value)}\n                  />\n                </CInputGroup>\n              </CCol>\n              <CCol xs={12}>\n                <CInputGroup className=\"mb-3\">\n                  <CInputGroupText id=\"nama-area\">Kecamatan</CInputGroupText>\n                  <CFormSelect\n                    aria-label=\"Default select example\"\n                    aria-describedby=\"nama-area\"\n                    value={selectedArea}\n                    onChange={handleSelectChangeArea}\n                    options={optionsArea}\n                  ></CFormSelect>\n                </CInputGroup>\n              </CCol>\n              <CCol xs={12}>\n                <CInputGroup className=\"mb-3\">\n                  <CFormInput\n                    name=\"alamat\"\n                    placeholder=\"Alamat\"\n                    floatingLabel=\"Alamat\"\n                    defaultValue={alamat}\n                    required\n                    onChange={(e) => setAlamat(e.target.value)}\n                  />\n                </CInputGroup>\n              </CCol>\n              <CCol xs={12}>\n                <CInputGroup className=\"mb-3\">\n                  <CInputGroupText id=\"nama-kurir\">Nama Kurir</CInputGroupText>\n                  <CFormSelect\n                    aria-label=\"Default select example\"\n                    id=\"nama-kurir\"\n                    value={selectedKurir}\n                    onChange={handleSelectChangeKurir}\n                    options={optionsKurir}\n                    disabled={isKurirDisabled}\n                  ></CFormSelect>\n                </CInputGroup>\n              </CCol>\n            </CRow>\n          </CCardBody>\n          <CCardFooter>\n            <CRow>\n              <CCol xs={10}></CCol>\n              <CCol md={1}>\n                <CButton\n                  color=\"secondary\"\n                  variant=\"outline\"\n                  className=\"ms-2\"\n                  title=\"Back\"\n                  onClick={handleCancel}\n                >\n                  Back\n                </CButton>\n              </CCol>\n              <CCol xs={1}>\n                {loading ? (\n                  <CButton color=\"primary\" variant=\"outline\" type=\"submit\" disabled>\n                    <CSpinner color=\"info\" size=\"sm\" />\n                  </CButton>\n                ) : (\n                  <CButton color=\"primary\" variant=\"outline\" type=\"submit\">\n                    Submit\n                  </CButton>\n                )}\n              </CCol>\n            </CRow>\n            <CRow className=\"mt-2\">\n              {message && <p className=\"error-message alert alert-danger\">{message}</p>}\n            </CRow>\n          </CCardFooter>\n        </CForm>\n      </CCard>\n    </>\n  )\n}\n\nexport default FormUpdateRoti\n"],"names":["FormUpdateRoti","selectedArea","setSelectedArea","useState","optionsArea","setOptionsArea","selectedKurir","setSelectedKurir","optionsKurir","setOptionsKurir","namaLapak","setNamaLapak","kodeLapak","setKodeLapak","alamat","setAlamat","noTelp","setNoTelp","message","setMessage","loading","setLoading","isKurirDisabled","setIsKurirDisabled","navigate","useNavigate","handleKurir","area_id","axios","get","then","response","data","areaLapakString","parseInt","filteredKurir","filter","kurir","console","log","OptionsKurir","map","isSelected","id_kurir","label","nama","value","catch","error","useEffect","dataLapak","JSON","parse","localStorage","getItem","nama_lapak","kode_lapak","no_telp","formattedOptions","area","area_distribusi","_jsx","_Fragment","children","CCard","_jsxs","CForm","onSubmit","async","e","preventDefault","updateLapak","alamat_lapak","put","concat","removeItem","Swal","title","text","icon","confirmButtonText","result","isConfirmed","window","location","href","resMessage","toString","CCardHeader","CCardBody","CRow","CCol","xs","CInputGroup","className","CFormInput","name","placeholder","floatingLabel","defaultValue","required","onChange","target","CInputGroupText","id","CFormSelect","event","selectedValue","options","selectedValueKurir","disabled","CCardFooter","md","CButton","color","variant","onClick","type","CSpinner","size"],"sourceRoot":""}