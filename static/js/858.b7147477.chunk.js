"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[858],{2858:(e,r,a)=>{a.r(r),a.d(r,{default:()=>h});var s=a(2791),l=a(5294),i=a(1830),t=a.n(i),n=a(2937),c=a(4846),o=a(3400),d=a(184);const h=()=>{const[e,r]=(0,s.useState)(""),[a,i]=(0,s.useState)([]),[h,x]=(0,s.useState)(!1),[j,u]=(0,s.useState)(!1),[m,p]=(0,s.useState)(""),[g,k]=(0,s.useState)([]),[b,N]=(0,s.useState)(1),[v,y]=(0,s.useState)(10),f=[10,25,50,g.length];(0,s.useEffect)((()=>{C()}),[]);const C=()=>{l.Z.get("https://be-myroti-production.up.railway.app/api/kurir/transaksi").then((e=>{console.log(e.data),k(e.data)})).catch((e=>{console.error("Error fetching data:",e)}))},_=e=>{const r=new Date(e);return"".concat(r.getDate().toString().padStart(2,"0"),"-").concat((r.getMonth()+1).toString().padStart(2,"0"),"-").concat(r.getFullYear())},S=["lapak.nama_lapak","lapak.kurir.nama","status","tanggal_pengiriman"],w=g.filter((r=>""===e||S.some((a=>{const s=a.split("."),l=(i=r,s.reduce(((e,r)=>e&&void 0!==e[r]?e[r]:""),i));var i;return"string"===typeof l&&l.toLowerCase().includes(e.toLowerCase())}))));const L=(b-1)*v,R=v===g.length?g.length:L+v,T=w.slice(L,R),P=L+1,E=Math.min(L+v,w.length),D=0===w.length;return(0,d.jsxs)("div",{children:[(0,d.jsx)(n.rb,{children:(0,d.jsx)(n.b7,{children:(0,d.jsxs)(n.xH,{children:[(0,d.jsx)(n.bn,{children:"Data Pengiriman Kurir"}),(0,d.jsxs)(n.sl,{children:[(0,d.jsx)(n.lx,{className:"mb-3",children:(0,d.jsxs)(n.rb,{children:[(0,d.jsx)(n.b7,{md:8,xs:6,children:(0,d.jsxs)(n.YR,{children:[(0,d.jsx)(n.jO,{type:"text",placeholder:"Search...",value:e,onChange:e=>r(e.target.value)}),(0,d.jsx)(n.u5,{variant:"outline",className:"ms-2",children:(0,d.jsx)(c.Z,{icon:o.j})})]})}),(0,d.jsx)(n.b7,{md:2,xs:3,children:(0,d.jsx)(n.L8,{children:"Rows Per Page:"})}),(0,d.jsx)(n.b7,{md:2,xs:3,children:(0,d.jsx)(n.LX,{className:"form-select",value:v,onChange:e=>{return r=parseInt(e.target.value),N(1),void y(r);var r},children:f.map((e=>(0,d.jsx)("option",{value:e,children:e===g.length?"All":e},e)))})})]})}),(0,d.jsxs)(n.Sx,{striped:!0,bordered:!0,responsive:!0,children:[(0,d.jsx)(n.V,{children:(0,d.jsxs)(n.T6,{children:[(0,d.jsx)(n.is,{children:"No"}),(0,d.jsx)(n.is,{children:"Lapak"}),(0,d.jsx)(n.is,{children:"Alamat Lapak"}),(0,d.jsx)(n.is,{children:"Kurir"}),(0,d.jsx)(n.is,{children:"Tanggal Pengiriman"}),(0,d.jsx)(n.is,{children:"Roti"}),(0,d.jsx)(n.is,{children:"Bukti Pengiriman"}),(0,d.jsx)(n.is,{children:"Status"})]})}),(0,d.jsx)(n.NR,{children:0===T.length?(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"8",className:"text-center",children:"Tidak ada data."})}):T.map(((e,r)=>(0,d.jsxs)(n.T6,{children:[(0,d.jsx)(n.NN,{children:L+r+1}),(0,d.jsx)(n.NN,{children:e.lapak.nama_lapak}),(0,d.jsx)(n.NN,{children:e.lapak.alamat_lapak}),(0,d.jsx)(n.NN,{children:e.lapak.kurir.nama}),(0,d.jsx)(n.NN,{children:_(e.tanggal_pengiriman)}),(0,d.jsx)(n.NN,{children:(0,d.jsxs)(n.u5,{color:"primary",variant:"outline",size:"sm",className:"ms-2",title:"Daftar Roti",onClick:()=>(e=>{i(e.transaksi_roti),x(!0),console.log(g),console.log(a)})(e),children:[(0,d.jsx)(c.Z,{icon:o.j,className:"mx-12 me-2"}),"Open Detail"]})}),(0,d.jsx)(n.NN,{children:(0,d.jsx)(n.u5,{variant:"outline",size:"sm",onClick:()=>(e=>{"delivered"===e.status?(console.log(e.bukti_pengiriman),l.Z.get("https://be-myroti-production.up.railway.app/api/koordinator/"+e.bukti_pengiriman,{responseType:"blob"}).then((e=>{const r=new FileReader;r.onload=e=>{const r=e.target.result;p(r),u(!0)},r.readAsDataURL(e.data)})).catch((e=>{console.error("Error fetching data:",e)}))):t().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",t().stopTimer),e.addEventListener("mouseleave",t().resumeTimer)}}).fire({icon:"error",title:"Kurir Belum Sampai"})})(e),children:"Lihat"})}),(0,d.jsx)(n.NN,{style:{color:"ready"===e.status?"green":"on delivery"===e.status?"red":"blue"},children:e.status})]},r)))})]}),(0,d.jsx)(n.rb,{className:"mt-2 mb-2",children:(0,d.jsxs)(n.b7,{md:4,xs:8,children:["Total Rows: ",w.length," Page: ",P," of ",E]})}),(0,d.jsxs)(n.E7,{activepage:b,pages:Math.ceil(w.length/v),onActivePageChange:N,align:"center",doublearrows:"false",children:[(0,d.jsx)(n.tn,{onClick:()=>!D&&N(b-1),disabled:1===b||D,style:{cursor:D?"default":"pointer"},children:"Prev"}),Array.from({length:Math.ceil(w.length/v)},((e,r)=>{const a=r+1,s=Math.ceil(w.length/v);return a>=b-1&&a<=b+1||s<=3||1===b&&a<=3||b===s&&a>=s-2?(0,d.jsx)(n.tn,{active:a===b,onClick:()=>N(a),style:{cursor:"pointer"},children:a},a):1===a&&b>2||a===s&&b<s-1?(0,d.jsx)(n.tn,{disabled:!0,style:{cursor:"default"},children:"..."},a):null})),(0,d.jsx)(n.tn,{onClick:()=>!D&&N(b+1),disabled:b===Math.ceil(w.length/v)||D,style:{cursor:D?"default":"pointer"},children:"Next"})]})]})]})})}),(0,d.jsxs)(n.Tk,{backdrop:"static",visible:h,className:"modal",onClose:()=>x(!1),"aria-labelledby":"VerticallyCenteredExample",children:[(0,d.jsx)(n.p0,{children:(0,d.jsx)(n.fl,{id:"VerticallyCenteredExample",children:"Data Roti"})}),(0,d.jsx)(n.sD,{children:(0,d.jsxs)(n.Sx,{striped:!0,bordered:!0,responsive:!0,children:[(0,d.jsx)(n.V,{children:(0,d.jsxs)(n.T6,{children:[(0,d.jsx)(n.is,{children:"Nama Roti"}),(0,d.jsx)(n.is,{children:"Jumlah Roti"})]})}),(0,d.jsx)(n.NR,{children:a.map(((e,r)=>(0,d.jsxs)(n.T6,{children:[(0,d.jsx)(n.NN,{children:e.roti.nama_roti}),(0,d.jsx)(n.NN,{children:e.jumlah_roti})]},r)))})]})}),(0,d.jsx)(n.Ym,{children:(0,d.jsx)(n.u5,{color:"secondary",onClick:()=>x(!1),children:"Close"})})]}),(0,d.jsxs)(n.Tk,{backdrop:"static",visible:j,className:"modal",onClose:()=>u(!1),"aria-labelledby":"VerticallyCenteredExample",children:[(0,d.jsx)(n.p0,{children:(0,d.jsx)(n.fl,{id:"VerticallyCenteredExample",children:"Preview Foto"})}),(0,d.jsx)(n.sD,{children:(0,d.jsx)("img",{src:m,alt:"Preview",style:{maxWidth:"100%",height:"auto"}})}),(0,d.jsx)(n.Ym,{children:(0,d.jsx)(n.u5,{color:"secondary",onClick:()=>u(!1),children:"Close"})})]})]})}},3400:(e,r,a)=>{a.d(r,{j:()=>s});var s=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M479.6,399.716l-81.084-81.084-62.368-25.767A175.014,175.014,0,0,0,368,192c0-97.047-78.953-176-176-176S16,94.953,16,192,94.953,368,192,368a175.034,175.034,0,0,0,101.619-32.377l25.7,62.2L400.4,478.911a56,56,0,1,0,79.2-79.195ZM48,192c0-79.4,64.6-144,144-144s144,64.6,144,144S271.4,336,192,336,48,271.4,48,192ZM456.971,456.284a24.028,24.028,0,0,1-33.942,0l-76.572-76.572-23.894-57.835L380.4,345.771l76.573,76.572A24.028,24.028,0,0,1,456.971,456.284Z' class='ci-primary'/>"]}}]);
//# sourceMappingURL=858.b7147477.chunk.js.map