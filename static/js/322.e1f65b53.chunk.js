"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[322],{2322:(e,a,r)=>{r.r(a),r.d(a,{default:()=>h});var i=r(2791),s=r(5294),l=r(1830),t=r.n(l),n=r(2937),c=r(4846),d=r(3400),o=r(184);const h=()=>{const[e,a]=(0,i.useState)(""),[r,l]=(0,i.useState)([]),[h,x]=(0,i.useState)(!1),[j,u]=(0,i.useState)(!1),[m,p]=(0,i.useState)(""),[g,N]=(0,i.useState)([]),[v,b]=(0,i.useState)(1),[k,f]=(0,i.useState)(10),_=[10,25,50,g.length];(0,i.useEffect)((()=>{JSON.parse(localStorage.getItem("dataLogin"));y()}),[]);const y=()=>{s.Z.get("https://be-myroti-production.up.railway.app/api/kurir/datapenjualan").then((e=>{N(e.data)})).catch((e=>{console.error("Error fetching data:",e)}))},C=g.filter((a=>{var r,i;const s=((null===a||void 0===a||null===(r=a.nama_lapak)||void 0===r||null===(i=r.toString())||void 0===i?void 0:i.toLowerCase())||"").includes(e.toLowerCase());return"finished"==(null===a||void 0===a?void 0:a.status)&&s})),w=(v-1)*k,S=k===g.length?g.length:w+k,T=C.slice(w,S),L=w+1,R=Math.min(w+k,C.length),P=0===C.length;return(0,o.jsxs)("div",{children:[(0,o.jsx)(n.rb,{children:(0,o.jsx)(n.b7,{children:(0,o.jsxs)(n.xH,{children:[(0,o.jsx)(n.bn,{children:"Data Pengiriman Kurir"}),(0,o.jsxs)(n.sl,{children:[(0,o.jsx)(n.lx,{className:"mb-3",children:(0,o.jsxs)(n.rb,{children:[(0,o.jsx)(n.b7,{md:8,xs:6,children:(0,o.jsxs)(n.YR,{children:[(0,o.jsx)(n.jO,{type:"text",placeholder:"Search...",value:e,onChange:e=>a(e.target.value)}),(0,o.jsx)(n.u5,{variant:"outline",className:"ms-2",children:(0,o.jsx)(c.Z,{icon:d.j})})]})}),(0,o.jsx)(n.b7,{md:2,xs:3,children:(0,o.jsx)(n.L8,{children:"Rows Per Page:"})}),(0,o.jsx)(n.b7,{md:2,xs:3,children:(0,o.jsx)(n.LX,{className:"form-select",value:k,onChange:e=>{return a=parseInt(e.target.value),b(1),void f(a);var a},children:_.map((e=>(0,o.jsx)("option",{value:e,children:e===g.length?"All":e},e)))})})]})}),(0,o.jsxs)(n.Sx,{striped:!0,bordered:!0,responsive:!0,children:[(0,o.jsx)(n.V,{children:(0,o.jsxs)(n.T6,{children:[(0,o.jsx)(n.is,{children:"No"}),(0,o.jsx)(n.is,{children:"Lapak"}),(0,o.jsx)(n.is,{children:"Alamat Lapak"}),(0,o.jsx)(n.is,{children:"Kurir"}),(0,o.jsx)(n.is,{children:"Tanggal Pengiriman"}),(0,o.jsx)(n.is,{children:"Tanggal Pengambilan"}),(0,o.jsx)(n.is,{children:"Roti"}),(0,o.jsx)(n.is,{children:"Bukti Pengiriman"})]})}),(0,o.jsx)(n.NR,{children:0===T.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"8",className:"text-center",children:"Tidak ada data."})}):T.map(((e,a)=>(0,o.jsxs)(n.T6,{children:[(0,o.jsx)(n.NN,{children:w+a+1}),(0,o.jsx)(n.NN,{children:e.nama_lapak}),(0,o.jsx)(n.NN,{children:e.alamat_lapak}),(0,o.jsx)(n.NN,{children:e.nama}),(0,o.jsx)(n.NN,{children:e.tanggal_pengiriman}),(0,o.jsx)(n.NN,{children:e.tanggal_pengambilan}),(0,o.jsx)(n.NN,{children:(0,o.jsxs)(n.u5,{color:"primary",variant:"outline",className:"ms-2",title:"Daftar Roti",onClick:()=>(async e=>{try{const a=await s.Z.get("https://be-myroti-production.up.railway.app/api/kurir/riwayat-transaksi/".concat(e.id_transaksi));if(!(a.status>=200&&a.status<300))throw new Error("Gagal mengambil data roti");{const e=a.data;l(e.detail_roti),x(!0)}}catch(a){console.error("Terjadi kesalahan:",a.message)}})(e),children:[(0,o.jsx)(c.Z,{icon:d.j,className:"mx-12 me-2"}),"Open Detail"]})}),(0,o.jsx)(n.NN,{children:(0,o.jsx)(n.u5,{variant:"outline",size:"sm",onClick:()=>(e=>{"delivered"===e.status?(console.log(e.bukti_pengiriman),s.Z.get("https://be-myroti-production.up.railway.app/api/koordinator/"+e.bukti_pengiriman,{responseType:"blob"}).then((e=>{const a=new FileReader;a.onload=e=>{const a=e.target.result;p(a),u(!0)},a.readAsDataURL(e.data)})).catch((e=>{console.error("Error fetching data:",e)}))):t().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",t().stopTimer),e.addEventListener("mouseleave",t().resumeTimer)}}).fire({icon:"error",title:"Kurir Belum Sampai"})})(e),children:"Lihat"})})]},a)))})]}),(0,o.jsx)(n.rb,{className:"mt-2 mb-2",children:(0,o.jsxs)(n.b7,{md:4,xs:8,children:["Total Rows: ",C.length," Page: ",L," of ",R]})}),(0,o.jsxs)(n.E7,{activepage:v,pages:Math.ceil(C.length/k),onActivePageChange:b,align:"center",doublearrows:"false",children:[(0,o.jsx)(n.tn,{onClick:()=>!P&&b(v-1),disabled:1===v||P,style:{cursor:P?"default":"pointer"},children:"Prev"}),Array.from({length:Math.ceil(C.length/k)},((e,a)=>{const r=a+1,i=Math.ceil(C.length/k);return r>=v-1&&r<=v+1||i<=3||1===v&&r<=3||v===i&&r>=i-2?(0,o.jsx)(n.tn,{active:r===v,onClick:()=>b(r),style:{cursor:"pointer"},children:r},r):1===r&&v>2||r===i&&v<i-1?(0,o.jsx)(n.tn,{disabled:!0,style:{cursor:"default"},children:"..."},r):null})),(0,o.jsx)(n.tn,{onClick:()=>!P&&b(v+1),disabled:v===Math.ceil(C.length/k)||P,style:{cursor:P?"default":"pointer"},children:"Next"})]})]})]})})}),(0,o.jsxs)(n.Tk,{backdrop:"static",visible:h,className:"modal",onClose:()=>{x(!1)},children:[(0,o.jsx)(n.p0,{children:(0,o.jsx)(n.fl,{id:"VerticallyCenteredExample",children:"Data Roti"})}),(0,o.jsx)(n.sD,{children:(0,o.jsxs)(n.Sx,{striped:!0,bordered:!0,responsive:!0,children:[(0,o.jsx)(n.V,{children:(0,o.jsxs)(n.T6,{children:[(0,o.jsx)(n.is,{children:"Nama Roti"}),(0,o.jsx)(n.is,{children:"Jumlah Roti"}),(0,o.jsx)(n.is,{children:"Jumlah Roti Basi"})]})}),(0,o.jsx)(n.NR,{children:r.map(((e,a)=>(0,o.jsxs)(n.T6,{children:[(0,o.jsx)(n.NN,{children:e.nama_roti}),(0,o.jsx)(n.NN,{children:e.jumlah_roti}),(0,o.jsx)(n.NN,{children:e.jumlah_roti_basi})]},a)))})]})}),(0,o.jsx)(n.Ym,{children:(0,o.jsx)(n.u5,{color:"secondary",onClick:()=>x(!1),children:"Close"})})]}),(0,o.jsxs)(n.Tk,{backdrop:"static",visible:j,className:"modal",onClose:()=>{u(!1)},children:[(0,o.jsx)(n.p0,{children:(0,o.jsx)(n.fl,{id:"VerticallyCenteredExample",children:"Preview Foto"})}),(0,o.jsx)(n.sD,{children:(0,o.jsx)("img",{src:m,alt:"Preview",style:{maxWidth:"100%",height:"auto"}})}),(0,o.jsx)(n.Ym,{children:(0,o.jsx)(n.u5,{color:"secondary",onClick:()=>u(!1),children:"Close"})})]})]})}},3400:(e,a,r)=>{r.d(a,{j:()=>i});var i=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M479.6,399.716l-81.084-81.084-62.368-25.767A175.014,175.014,0,0,0,368,192c0-97.047-78.953-176-176-176S16,94.953,16,192,94.953,368,192,368a175.034,175.034,0,0,0,101.619-32.377l25.7,62.2L400.4,478.911a56,56,0,1,0,79.2-79.195ZM48,192c0-79.4,64.6-144,144-144s144,64.6,144,144S271.4,336,192,336,48,271.4,48,192ZM456.971,456.284a24.028,24.028,0,0,1-33.942,0l-76.572-76.572-23.894-57.835L380.4,345.771l76.573,76.572A24.028,24.028,0,0,1,456.971,456.284Z' class='ci-primary'/>"]}}]);
//# sourceMappingURL=322.e1f65b53.chunk.js.map