"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[274],{2274:(a,e,t)=>{t.r(e),t.d(e,{default:()=>d});var s=t(2791),r=t(5294),l=t(1830),i=t.n(l),n=t(7689),o=t(2937),c=t(184);const d=()=>{const[a,e]=(0,s.useState)(""),[t,l]=(0,s.useState)([]),[d,u]=(0,s.useState)(""),[p,m]=(0,s.useState)([]),[h,x]=(0,s.useState)(""),[b,j]=(0,s.useState)(""),[g,k]=(0,s.useState)(""),[_,f]=(0,s.useState)(""),[S,v]=(0,s.useState)(""),[y,N]=(0,s.useState)(!1),[L,w]=(0,s.useState)(!1),C=(0,n.s0)();function D(a){r.Z.get("https://be-myroti-production.up.railway.app/api/kurir").then((e=>{const t=e.data,s=parseInt(a,10),r=t.filter((a=>a.area_id===s));console.log(r);const l=["--Pilih Kurir--",...r.map((a=>({isSelected:a.id_kurir===d,label:a.nama,value:a.id_kurir})))];m(l)})).catch((a=>{console.error("Error:",a)}))}(0,s.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("lsDataLapak"));x(t.nama_lapak),k(t.alamat),e(t.area_id),u(t.id_kurir),j(t.kode_lapak),f(t.no_telp),r.Z.get("https://be-myroti-production.up.railway.app/api/area").then((e=>{const t=["--Pilih Kecamatan--",...e.data.map((e=>({label:e.area_distribusi,value:e.area_id,isSelected:e.area_id===a})))];l(t)})).catch((a=>{console.error("Error:",a)})),D(t.area_id)}),[]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(o.xH,{children:(0,c.jsxs)(o.lx,{onSubmit:async e=>{e.preventDefault();const t=parseInt(a,10),s={nama_lapak:h,no_telp:_,id_kurir:d,area_id:t,alamat_lapak:g};console.log(s),console.log(b);try{const a=r.Z.put("https://be-myroti-production.up.railway.app/api/koordinator/lapak/update/".concat(b),s);console.log("Roti updated successfully:",a.data),localStorage.removeItem("lsDataLapak"),i().fire({title:"Berhasil",text:"Data ".concat(s.nama_lapak," telah berhasil diubah."),icon:"success",confirmButtonText:"OK"}).then((e=>{e.isConfirmed&&(window.location.href="/lapak",console.log("Roti updated successfully:",a.data))}))}catch(l){if(l.response&&l.response.data&&l.response.data.message){const a=l.response&&l.response.data&&l.response.data.message||l.message||l.toString();v(a)}N(!1)}},children:[(0,c.jsx)(o.bn,{children:"Form Update Lapak"}),(0,c.jsx)(o.sl,{children:(0,c.jsxs)(o.rb,{children:[(0,c.jsx)(o.b7,{xs:12,children:(0,c.jsx)(o.YR,{className:"mb-3",children:(0,c.jsx)(o.jO,{name:"namaLapak",placeholder:"Nama Lapak",floatingLabel:"Nama Lapak",defaultValue:h,required:!0,onChange:a=>x(a.target.value)})})}),(0,c.jsx)(o.b7,{xs:12,children:(0,c.jsx)(o.YR,{className:"mb-3",children:(0,c.jsx)(o.jO,{name:"NoTelp",placeholder:"No Telp",floatingLabel:"No Telp",defaultValue:_,required:!0,onChange:a=>f(a.target.value)})})}),(0,c.jsx)(o.b7,{xs:12,children:(0,c.jsxs)(o.YR,{className:"mb-3",children:[(0,c.jsx)(o.wV,{id:"nama-area",children:"Kecamatan"}),(0,c.jsx)(o.LX,{"aria-label":"Default select example","aria-describedby":"nama-area",value:a,onChange:a=>{const t=a.target.value;e(t),w("--Pilih Kecamatan--"===t),"--Pilih Kecamatan--"===t?m([]):(D(t),u(""))},options:t})]})}),(0,c.jsx)(o.b7,{xs:12,children:(0,c.jsx)(o.YR,{className:"mb-3",children:(0,c.jsx)(o.jO,{name:"alamat",placeholder:"Alamat",floatingLabel:"Alamat",defaultValue:g,required:!0,onChange:a=>k(a.target.value)})})}),(0,c.jsx)(o.b7,{xs:12,children:(0,c.jsxs)(o.YR,{className:"mb-3",children:[(0,c.jsx)(o.wV,{id:"nama-kurir",children:"Nama Kurir"}),(0,c.jsx)(o.LX,{"aria-label":"Default select example",id:"nama-kurir",value:d,onChange:a=>{const e=a.target.value;u(e)},options:p,disabled:L})]})})]})}),(0,c.jsxs)(o.Bt,{children:[(0,c.jsxs)(o.rb,{children:[(0,c.jsx)(o.b7,{xs:10}),(0,c.jsx)(o.b7,{md:1,children:(0,c.jsx)(o.u5,{color:"secondary",variant:"outline",className:"ms-2",title:"Back",onClick:function(){localStorage.removeItem("lsDataLapak"),C("/lapak")},children:"Back"})}),(0,c.jsx)(o.b7,{xs:1,children:y?(0,c.jsx)(o.u5,{color:"primary",variant:"outline",type:"submit",disabled:!0,children:(0,c.jsx)(o.LQ,{color:"info",size:"sm"})}):(0,c.jsx)(o.u5,{color:"primary",variant:"outline",type:"submit",children:"Submit"})})]}),(0,c.jsx)(o.rb,{className:"mt-2",children:S&&(0,c.jsx)("p",{className:"error-message alert alert-danger",children:S})})]})]})})})}}}]);
//# sourceMappingURL=274.706eee0f.chunk.js.map