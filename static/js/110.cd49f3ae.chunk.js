"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[110],{4110:(e,s,l)=>{l.r(s),l.d(s,{default:()=>o});var a=l(2791),i=l(5294),r=l(2937),t=l(4846),n=l(3400),c=l(184);const o=()=>{const[e,s]=(0,a.useState)(""),[l,o]=(0,a.useState)([]),[d,h]=(0,a.useState)(!1),[u,x]=(0,a.useState)(!1),[j,p]=(0,a.useState)(null),[m,g]=(0,a.useState)([]),[v,k]=(0,a.useState)(""),[N,b]=(0,a.useState)([]),[y,f]=(0,a.useState)(1),[C,S]=(0,a.useState)(10),_=[10,25,50,N.length];(0,a.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("dataLogin"));k(e.id),w()}),[]);const w=()=>{i.Z.get("https://be-myroti-production.up.railway.app/api/kurir/transaksi").then((e=>{console.log(e.data),b(e.data)})).catch((e=>{console.error("Error fetching data:",e)}))},R=N.filter((s=>{var l,a;const i=((null===s||void 0===s||null===(l=s.lapak.nama_lapak)||void 0===l||null===(a=l.toString())||void 0===a?void 0:a.toLowerCase())||"").includes(e.toLowerCase()),r="delivered"!==(null===s||void 0===s?void 0:s.status)&&"finished"!==(null===s||void 0===s?void 0:s.status),t=(null===s||void 0===s?void 0:s.id_kurir)===v;return i&&r&&t})),L=(y-1)*C,A=C===N.length?N.length:L+C,P=R.slice(L,A),D=L+1,M=Math.min(L+C,R.length),T=0===R.length;return(0,c.jsxs)("div",{children:[(0,c.jsx)(r.rb,{children:(0,c.jsx)(r.b7,{children:(0,c.jsxs)(r.xH,{children:[(0,c.jsx)(r.bn,{children:"Data Pengiriman Kurir"}),(0,c.jsxs)(r.sl,{children:[(0,c.jsx)(r.lx,{className:"mb-3",children:(0,c.jsxs)(r.rb,{children:[(0,c.jsx)(r.b7,{md:8,xs:6,children:(0,c.jsxs)(r.YR,{children:[(0,c.jsx)(r.jO,{type:"text",placeholder:"Search...",value:e,onChange:e=>s(e.target.value)}),(0,c.jsx)(r.u5,{variant:"outline",className:"ms-2",children:(0,c.jsx)(t.Z,{icon:n.j})})]})}),(0,c.jsx)(r.b7,{md:2,xs:3,children:(0,c.jsx)(r.L8,{children:"Rows Per Page:"})}),(0,c.jsx)(r.b7,{md:2,xs:3,children:(0,c.jsx)(r.LX,{className:"form-select",value:C,onChange:e=>{return s=parseInt(e.target.value),f(1),void S(s);var s},children:_.map((e=>(0,c.jsx)("option",{value:e,children:e===N.length?"All":e},e)))})})]})}),(0,c.jsxs)(r.Sx,{striped:!0,bordered:!0,responsive:!0,children:[(0,c.jsx)(r.V,{children:(0,c.jsxs)(r.T6,{children:[(0,c.jsx)(r.is,{children:"No"}),(0,c.jsx)(r.is,{children:"Lapak"}),(0,c.jsx)(r.is,{children:"Alamat Lengkap"}),(0,c.jsx)(r.is,{children:"Roti"}),(0,c.jsx)(r.is,{children:"Bukti Pengiriman"}),(0,c.jsx)(r.is,{children:"Status"}),(0,c.jsx)(r.is,{children:"Aksi"})]})}),(0,c.jsx)(r.NR,{children:0===P.length?(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:"7",className:"text-center",children:"Tidak ada data."})}):P.map(((e,s)=>(0,c.jsxs)(r.T6,{children:[(0,c.jsx)(r.NN,{children:L+s+1}),(0,c.jsx)(r.NN,{children:e.lapak.nama_lapak}),(0,c.jsx)(r.NN,{children:e.lapak.alamat_lapak}),(0,c.jsx)(r.NN,{children:(0,c.jsxs)(r.u5,{color:"primary",variant:"outline",className:"ms-2",title:"Daftar Roti",onClick:()=>(e=>{o(e.transaksi_roti),h(!0),console.log(N),console.log(l)})(e),children:[(0,c.jsx)(t.Z,{icon:n.j,className:"mx-12 me-2"}),"Open Detail"]})}),(0,c.jsx)(r.NN,{children:(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,c.jsx)(r.jO,{type:"file",size:"sm",id:"formFileSm",accept:"image/jpeg, image/jpg, image/png",onChange:e=>((e,s)=>{const l=e.target.files[0],a=[...m];a[s]=l,g(a),console.log(a)})(e,s),disabled:"ready"===e.status,style:{width:"60%"}}),(0,c.jsx)(r.u5,{variant:"outline",size:"sm",className:"mx-2",onClick:()=>(e=>{const s=[...m][e];if(s){const e=new FileReader;e.onload=e=>{const s=e.target.result;p(s),x(!0)},e.readAsDataURL(s)}})(s),disabled:"ready"===e.status,children:"Lihat"}),(0,c.jsx)(r.u5,{variant:"outline",size:"sm",className:"mx-1",onClick:()=>((e,s)=>{const l=[...m][s];if(l){const s=new FormData;s.append("bukti_pengiriman",l),i.Z.post("https://be-myroti-production.up.railway.app/api/kurir/transaksi/".concat(e.id_transaksi),s).then((e=>{console.log("File uploaded successfully",e),p(null),w()})).catch((e=>{console.error("Error uploading file:",e)}))}else console.error("No file selected for upload")})(e,s),disabled:"ready"===e.status,children:"Submit Foto"})]})}),(0,c.jsx)(r.NN,{style:{color:"ready"===e.status?"green":"red"},children:e.status}),(0,c.jsx)(r.NN,{children:(0,c.jsx)(r.u5,{variant:"outline",onClick:()=>(e=>{i.Z.put("https://be-myroti-production.up.railway.app/api/kurir/transaksi/".concat(e.id_transaksi),{status:"on delivery"}).then((()=>{w()})).catch((e=>{console.error("Error updating status:",e)}))})(e),disabled:"on delivery"===e.status,children:"Accept"})})]},s)))})]}),(0,c.jsx)(r.rb,{className:"mt-2 mb-2",children:(0,c.jsxs)(r.b7,{md:4,xs:8,children:["Total Rows: ",R.length," Page: ",D," of ",M]})}),(0,c.jsxs)(r.E7,{activepage:y,pages:Math.ceil(R.length/C),onActivePageChange:f,align:"center",doublearrows:"false",children:[(0,c.jsx)(r.tn,{onClick:()=>!T&&f(y-1),disabled:1===y||T,style:{cursor:T?"default":"pointer"},children:"Prev"}),Array.from({length:Math.ceil(R.length/C)},((e,s)=>{const l=s+1,a=Math.ceil(R.length/C);return l>=y-1&&l<=y+1||a<=3||1===y&&l<=3||y===a&&l>=a-2?(0,c.jsx)(r.tn,{active:l===y,onClick:()=>f(l),style:{cursor:"pointer"},children:l},l):1===l&&y>2||l===a&&y<a-1?(0,c.jsx)(r.tn,{disabled:!0,style:{cursor:"default"},children:"..."},l):null})),(0,c.jsx)(r.tn,{onClick:()=>!T&&f(y+1),disabled:y===Math.ceil(R.length/C)||T,style:{cursor:T?"default":"pointer"},children:"Next"})]})]})]})})}),(0,c.jsxs)(r.Tk,{backdrop:"static",visible:d,className:"modal",onClose:()=>{h(!1)},children:[(0,c.jsx)(r.p0,{children:(0,c.jsx)(r.fl,{id:"VerticallyCenteredExample",children:"Data Roti"})}),(0,c.jsx)(r.sD,{children:(0,c.jsxs)(r.Sx,{striped:!0,bordered:!0,responsive:!0,children:[(0,c.jsx)(r.V,{children:(0,c.jsxs)(r.T6,{children:[(0,c.jsx)(r.is,{children:"Nama Roti"}),(0,c.jsx)(r.is,{children:"Jumlah Roti"})]})}),(0,c.jsx)(r.NR,{children:l.map(((e,s)=>(0,c.jsxs)(r.T6,{children:[(0,c.jsx)(r.NN,{children:e.roti.nama_roti}),(0,c.jsx)(r.NN,{children:e.jumlah_roti})]},s)))})]})}),(0,c.jsx)(r.Ym,{children:(0,c.jsx)(r.u5,{color:"secondary",onClick:()=>h(!1),children:"Close"})})]}),(0,c.jsxs)(r.Tk,{backdrop:"static",visible:u,className:"modal",onClose:()=>{x(!1)},children:[(0,c.jsx)(r.p0,{children:(0,c.jsx)(r.fl,{id:"VerticallyCenteredExample",children:"Preview Foto"})}),(0,c.jsx)(r.sD,{children:(0,c.jsx)("img",{src:j,alt:"Preview",style:{maxWidth:"100%",height:"auto"}})}),(0,c.jsx)(r.Ym,{children:(0,c.jsx)(r.u5,{color:"secondary",onClick:()=>x(!1),children:"Close"})})]})]})}},3400:(e,s,l)=>{l.d(s,{j:()=>a});var a=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M479.6,399.716l-81.084-81.084-62.368-25.767A175.014,175.014,0,0,0,368,192c0-97.047-78.953-176-176-176S16,94.953,16,192,94.953,368,192,368a175.034,175.034,0,0,0,101.619-32.377l25.7,62.2L400.4,478.911a56,56,0,1,0,79.2-79.195ZM48,192c0-79.4,64.6-144,144-144s144,64.6,144,144S271.4,336,192,336,48,271.4,48,192ZM456.971,456.284a24.028,24.028,0,0,1-33.942,0l-76.572-76.572-23.894-57.835L380.4,345.771l76.573,76.572A24.028,24.028,0,0,1,456.971,456.284Z' class='ci-primary'/>"]}}]);
//# sourceMappingURL=110.cd49f3ae.chunk.js.map